<!DOCTYPE html>
<!-- saved from url=(0452)http://cache.baiducontent.com/c?m=BdymGqIhjKkgm-lg-khBjRWRhbJconUdigQ-ao-2uZuwU8B0guS1O4BqSxmP6GoK9QErj8aB_kOgQ_s-of39tydwCAs0VMjTPV6FHKB1IHZqe5yux9HVLbwabc9iyrOI3HrmfJF-E9G7Pn9XvKNObK&p=882a9e4e9cdd52fc57ef8a3e4e5d&newp=882a9e4e8d891abc09fbc7710f5592695d0fc20e3fd4d201298ffe0cc4241a1a1a3aecbe25271202d2c5796406af4f57edf63d723d0034f1f689df08d2ecce7e74c27c27210a&s=37693cfc748049e4&user=baidu&fm=sc&query=SDIO%B3%F5%CA%BC%BB%AF&qid=9efb928a00043f5e&p1=8 -->
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=GBK">
<!--<base href="https://www.pianshen.com/article/46511565024/">--><base href=".">
<style>
body{position:relative}
body,form{margin:0!important;padding:0!important}
#bd_snap{font:13px arial;color:#000;background:#fff;text-align:left;padding:13px 0 0 20px}
#bd_snap_txt{clear:both;padding:10px 0 2px;line-height:24px;color:#333}
#bd_snap_note{color:#999;padding-bottom:10px}
#bd_snap a{font:13px arial;color:#00c;text-decoration:underline}
#bd_snap_note a{color:#999}
#bd_snap_head{width:860px;height:44px}
#bd_snap_logo{width:162px;height:38px;display:block;background:url(http://www.baidu.com/img/logo-snap.png) no-repeat;margin-right:15px;float:left}
#bd_snap_search{width:680px;position:absolute;left:209px;top:17px}
#bd_snap_kw{width:531px;margin-right: 0;height:24px;padding:4px 7px;padding:6px 7px 2px\9;font:16px arial;vertical-align:top;border: 1px solid #b6b6b6;border-color: #7b7b7b #b6b6b6 #b6b6b6 #7b7b7b;background: #fff;display:inline-block;border-right-width: 0;border-color: #b8b8b8 transparent #ccc #b8b8b8;overflow: hidden;outline:0}
#bd_snap_kw:hover{border-color: #999 transparent #b3b3b3 #999;}
#bd_snap_kw:focus{border-color: #4791ff transparent #4791ff #4791ff}
#bd_snap_su{width:100px;height:34px;font-size:14px;color:#fff;padding:0;letter-spacing: 1px;background: #3385ff; border-bottom: 1px solid #2d78f4;outline: medium;-webkit-appearance: none;-webkit-border-radius: 0;cursor:pointer;border:0}
#bd_snap_search input.bd_snap_btn_h{background: #3075dc;box-shadow: inset 1px 1px 3px #2964bb;-webkit-box-shadow: inset 1px 1px 3px #2964bb;-moz-box-shadow: inset 1px 1px 3px #2964bb;-o-box-shadow: inset 1px 1px 3px #2964bb;}
#bd_snap_search input.btnhover{background: #317ef3;border-bottom: 1px solid #2868c8;box-shadow: 1px 1px 1px #ccc;}
#bd_snap_btn_wr{width:97px;height:34px;display:inline-block;_top:1px;*position:relative}
#bd_snap_ln{height:1px;border-top:1px solid #ACA899;background:#ECE9D8;overflow:hidden}
#bd_snap_txt span a{text-decoration:none}
</style>


</head><body><div id="bd_snap">
    <div id="bd_snap_head">
        <a href="http://www.baidu.com/" id="bd_snap_logo" title="到百度首页"></a>
    </div>
    <div id="bd_snap_txt">您查询的关键词是：<span><a style="color:black;background-color:#ffff66;padding:0 3px;font-weight:bold" href="http://cache.baiducontent.com/c?m=BdymGqIhjKkgm-lg-khBjRWRhbJconUdigQ-ao-2uZuwU8B0guS1O4BqSxmP6GoK9QErj8aB_kOgQ_s-of39tydwCAs0VMjTPV6FHKB1IHZqe5yux9HVLbwabc9iyrOI3HrmfJF-E9G7Pn9XvKNObK&amp;p=882a9e4e9cdd52fc57ef8a3e4e5d&amp;newp=882a9e4e8d891abc09fbc7710f5592695d0fc20e3fd4d201298ffe0cc4241a1a1a3aecbe25271202d2c5796406af4f57edf63d723d0034f1f689df08d2ecce7e74c27c27210a&amp;s=37693cfc748049e4&amp;user=baidu&amp;fm=sc&amp;query=SDIO%B3%F5%CA%BC%BB%AF&amp;qid=9efb928a00043f5e&amp;p1=8#baidusnap0">sdio</a><a style="color:black;background-color:#A0FFFF;padding:0 3px;font-weight:bold" href="http://cache.baiducontent.com/c?m=BdymGqIhjKkgm-lg-khBjRWRhbJconUdigQ-ao-2uZuwU8B0guS1O4BqSxmP6GoK9QErj8aB_kOgQ_s-of39tydwCAs0VMjTPV6FHKB1IHZqe5yux9HVLbwabc9iyrOI3HrmfJF-E9G7Pn9XvKNObK&amp;p=882a9e4e9cdd52fc57ef8a3e4e5d&amp;newp=882a9e4e8d891abc09fbc7710f5592695d0fc20e3fd4d201298ffe0cc4241a1a1a3aecbe25271202d2c5796406af4f57edf63d723d0034f1f689df08d2ecce7e74c27c27210a&amp;s=37693cfc748049e4&amp;user=baidu&amp;fm=sc&amp;query=SDIO%B3%F5%CA%BC%BB%AF&amp;qid=9efb928a00043f5e&amp;p1=8#baidusnap1">初始化</a></span>  
        <p>如果打开速度慢，可以尝试<a href="http://cache.baiducontent.com/c?m=BdymGqIhjKkgm-lg-khBjRWRhbJconUdigQ-ao-2uZuwU8B0guS1O4BqSxmP6GoK9QErj8aB_kOgQ_s-of39tydwCAs0VMjTPV6FHKB1IHZqe5yux9HVLbwabc9iyrOI3HrmfJF-E9G7Pn9XvKNObK&amp;p=882a9e4e9cdd52fc57ef8a3e4e5d&amp;newp=882a9e4e8d891abc09fbc7710f5592695d0fc20e3fd4d201298ffe0cc4241a1a1a3aecbe25271202d2c5796406af4f57edf63d723d0034f1f689df08d2ecce7e74c27c27210a&amp;s=37693cfc748049e4&amp;user=baidu&amp;fm=sc&amp;query=SDIO%B3%F5%CA%BC%BB%AF&amp;qid=9efb928a00043f5e&amp;p1=8&amp;fast=y">快速版</a>；如果想更新或删除快照，可以<a href="http://help.baidu.com/newadd?prod_id=1&amp;category=1&amp;link=http%3A%2F%2Fcache.baiducontent.com%2Fc%3Fm%3DBdymGqIhjKkgm-lg-khBjRWRhbJconUdigQ-ao-2uZuwU8B0guS1O4BqSxmP6GoK9QErj8aB_kOgQ_s-of39tydwCAs0VMjTPV6FHKB1IHZqe5yux9HVLbwabc9iyrOI3HrmfJF-E9G7Pn9XvKNObK%26p%3D882a9e4e9cdd52fc57ef8a3e4e5d%26newp%3D882a9e4e8d891abc09fbc7710f5592695d0fc20e3fd4d201298ffe0cc4241a1a1a3aecbe25271202d2c5796406af4f57edf63d723d0034f1f689df08d2ecce7e74c27c27210a%26s%3D37693cfc748049e4%26user%3Dbaidu%26fm%3Dsc%26query%3DSDIO%25B3%25F5%25CA%25BC%25BB%25AF%26qid%3D9efb928a00043f5e%26p1%3D8" id="bd_tousu">投诉快照</a>。
        </p>
    </div>
<script>document.getElementById('bd_tousu').href = 'http://help.baidu.com/newadd?prod_id=1&category=1&link=' + encodeURIComponent(document.location);</script>
    <div id="bd_snap_note">百度和网页 <a href="https://www.pianshen.com/article/46511565024/">https://www.pianshen.com/article/46511565024/</a> 的作者无关，不对其内容负责。百度快照谨为网络故障时之索引，不代表被搜索网站的即时页面。</div>
</div>
<div id="bd_snap_search">
	<form action="http://www.baidu.com/s"><input name="cl" type="hidden" value="3"><input name="wd" id="bd_snap_kw" maxlength="100"><span id="bd_snap_btn_wr"><input type="submit" id="bd_snap_su" value="百度一下" class="bd_snap_btn" onmouseover="this.className=&#39;bd_snap_btn bd_snap_btn_h&#39;" onmousedown="this.className=&#39;bd_snap_btn btnhover&#39;" onmouseup="this.className=&#39;bd_snap_btn&#39;" onmouseout="this.className=&#39;bd_snap_btn&#39;"></span></form>
</div>
<div id="bd_snap_ln"></div>
<div style="position:relative">







<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="keywords" content="[SDIO] SD card 初始化及常用命令解析（附波形，uboot代码），程序员大本营">
<meta name="description" content="[SDIO] SD card 初始化及常用命令解析（附波形，uboot代码），程序员大本营，技术文章内容聚合第一站。">
<!--[if IE]>
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <![endif]-->
<title>[SDIO] SD card 初始化及常用命令解析（附波形，uboot代码） - 程序员大本营</title>
<link href="./[SDIO] SD card 初始化及常用命令解析（附波形，uboot代码） - 程序员大本营_files/bootstrap.css" rel="stylesheet">
<link href="./[SDIO] SD card 初始化及常用命令解析（附波形，uboot代码） - 程序员大本营_files/style.css" rel="stylesheet">
<link href="./[SDIO] SD card 初始化及常用命令解析（附波形，uboot代码） - 程序员大本营_files/css.css" rel="stylesheet" type="text/css">
<link rel="stylesheet" href="./[SDIO] SD card 初始化及常用命令解析（附波形，uboot代码） - 程序员大本营_files/viewer.min.css">
<div id="68481-6"></div>
 








<div id="header">
<div class="container">
<div class="row">
<div class="col-md-4 logo-div">
<div class="logo-inner">
<div class="logo-name">
<a href="https://www.pianshen.com/">
<span> 程序员大本营 </span>
<small>技术文章内容聚合第一站</small>
</a>
</div>
<br>
<div class="links-home">
<a href="https://www.pianshen.com/">首页 /</a>
<a href="https://www.pianshen.com/cdn-cgi/l/email-protection#06766f6768756e636846616b7e2865696b">联系我们 /</a>
<a href="https://www.pianshen.com/copyright.html" rel="nofollow,noindex" target="_blank">版权申明 /</a>
<a href="https://www.pianshen.com/privacy-policy.html" rel="nofollow,noindex" target="_blank">隐私条款</a>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="info-sec">
<div class="container">
<div class="row">
<div class="col-md-2" style="width:100%;">
<div class="social-link" style="float:right;">
<form id="searchForm" action="https://www.pianshen.com/search" method="post" onsubmit="return validate();">
<div>
<input type="text" name="s" id="s" style="width:200px;"> <input type="submit" value="搜索" style="color:black;">
</div>
</form>
</div>
</div>
<div style="clear:both;"></div>
</div>
</div>
</div>
<div class="container">
<div class="row">
<div id="topads" style="width:100%;text-align:center;">
<iframe id="pianshen.com_980x300_responsive_DFP" frameborder="0" scrolling="no" marginheight="0" marginwidth="0" topmargin="0" leftmargin="0" width="1" height="1" src="./[SDIO] SD card 初始化及常用命令解析（附波形，uboot代码） - 程序员大本营_files/saved_resource.html"></iframe>

</div>
<div style="clear:both;"></div>
<div class="col-md-8">
<h2 style="line-height: 32px;word-break: break-all;">
<span>[<a name="baidusnap0"></a><b style="color:black;background-color:#ffff66">SDIO</b>] SD card <a name="baidusnap1"></a><b style="color:black;background-color:#A0FFFF">初始化</b>及常用命令解析（附波形，uboot代码）</span>
</h2>
<p style="margin-bottom:5px;">技术标签：&nbsp;<a href="https://www.pianshen.com/tag/emmc%2Fsd/" title="emmc/sd">emmc/sd</a>&nbsp;&nbsp;<a href="https://www.pianshen.com/tag/%E5%B5%8C%E5%85%A5%E5%BC%8FC/" title="嵌入式C">嵌入式C</a>&nbsp;&nbsp;<a href="https://www.pianshen.com/tag/%E5%B5%8C%E5%85%A5%E5%BC%8F/" title="嵌入式">嵌入式</a></p><div style="clear:both;"></div>
<div id="ads">
</div>
<div style="padding:5px 5px 5px 5px;word-wrap: break-word; word-break: normal;max-width: 850px;" id="article_content">
<div id="mbads1">
<div id="con_all">
<div id="con_da1">
</div>
<div id="con_da2">
</div>
</div>
</div>
<div id="ad_before_content">
<div id="protag-before_content"></div>

</div>
<div class="htmledit_views" id="content_views">
<p id="main-toc"><strong>目录</strong></p>
<p id="%E5%88%9D%E5%A7%8B%E5%8C%96-toc" style="margin-left:0px;"><a href="https://www.pianshen.com/article/46511565024/#%E5%88%9D%E5%A7%8B%E5%8C%96" rel="nofollow,noindex" target="_blank"><b style="color:black;background-color:#A0FFFF">初始化</b></a></p>
<p id="%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%201.cmd%200-toc" style="margin-left:40px;"><a href="https://www.pianshen.com/article/46511565024/#%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%201.cmd%200" rel="nofollow,noindex" target="_blank">1.cmd 0</a></p>
<p id="2.cmd8-toc" style="margin-left:40px;"><a href="https://www.pianshen.com/article/46511565024/#2.cmd8" rel="nofollow,noindex" target="_blank">2.cmd8</a></p>
<p id="3.cmd55-toc" style="margin-left:40px;"><a href="https://www.pianshen.com/article/46511565024/#3.cmd55" rel="nofollow,noindex" target="_blank">3.cmd55</a></p>
<p id="4.acmd41-toc" style="margin-left:40px;"><a href="https://www.pianshen.com/article/46511565024/#4.acmd41" rel="nofollow,noindex" target="_blank">4.acmd41</a></p>
<p id="5.cmd2-toc" style="margin-left:40px;"><a href="https://www.pianshen.com/article/46511565024/#5.cmd2" rel="nofollow,noindex" target="_blank">5.cmd2</a></p>
<p id="6.cmd3-toc" style="margin-left:40px;"><a href="https://www.pianshen.com/article/46511565024/#6.cmd3" rel="nofollow,noindex" target="_blank">6.cmd3</a></p>
<p id="7.cmd9-toc" style="margin-left:40px;"><a href="https://www.pianshen.com/article/46511565024/#7.cmd9" rel="nofollow,noindex" target="_blank">7.cmd9</a></p>
<p id="8.cmd13-toc" style="margin-left:40px;"><a href="https://www.pianshen.com/article/46511565024/#8.cmd13" rel="nofollow,noindex" target="_blank">8.cmd13</a></p>
<p id="9.cmd7-toc" style="margin-left:40px;"><a href="https://www.pianshen.com/article/46511565024/#9.cmd7" rel="nofollow,noindex" target="_blank">9.cmd7</a></p>
<p id="10.ACMD51-toc" style="margin-left:40px;"><a href="https://www.pianshen.com/article/46511565024/#10.ACMD51" rel="nofollow,noindex" target="_blank">10.ACMD51</a></p>
<p id="11.CMD6-toc" style="margin-left:40px;"><a href="https://www.pianshen.com/article/46511565024/#11.CMD6" rel="nofollow,noindex" target="_blank">11.CMD6</a></p>
<p id="12.CMD16-toc" style="margin-left:40px;"><a href="https://www.pianshen.com/article/46511565024/#12.CMD16" rel="nofollow,noindex" target="_blank">12.CMD16</a></p>
<p id="13.CMD17-toc" style="margin-left:40px;"><a href="https://www.pianshen.com/article/46511565024/#13.CMD17" rel="nofollow,noindex" target="_blank">13.CMD17</a></p>
<p id="14.CMD18-toc" style="margin-left:40px;"><a href="https://www.pianshen.com/article/46511565024/#14.CMD18" rel="nofollow,noindex" target="_blank">14.CMD18</a></p>
<p id="15.CMD12-toc" style="margin-left:40px;"><a href="https://www.pianshen.com/article/46511565024/#15.CMD12" rel="nofollow,noindex" target="_blank">15.CMD12</a></p>
<p id="tuning-toc" style="margin-left:0px;"><a href="https://www.pianshen.com/article/46511565024/#tuning" rel="nofollow,noindex" target="_blank">tuning</a></p>
<p id="CMD19-toc" style="margin-left:40px;"><a href="https://www.pianshen.com/article/46511565024/#CMD19" rel="nofollow,noindex" target="_blank">CMD19</a></p>
<p id="DW_SDHCI%E7%9A%84tuning%E6%B5%81%E7%A8%8B-toc" style="margin-left:40px;"><a href="https://www.pianshen.com/article/46511565024/#DW_SDHCI%E7%9A%84tuning%E6%B5%81%E7%A8%8B" rel="nofollow,noindex" target="_blank">DW_SDHCI的tuning流程</a></p>
<hr id="hr-toc"><h1 id="%E5%88%9D%E5%A7%8B%E5%8C%96" style="margin-left:0in;"><span style="color:#365f91;"><b style="color:black;background-color:#A0FFFF">初始化</b></span></h1>
<h2 id="%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%201.cmd%200" style="margin-left:0in;"><span style="color:#4f81bd;">1.cmd 0</span></h2>
<p style="margin-left:0in;">&nbsp;</p>
<p style="margin-left:0in;"><img alt="" src="./[SDIO] SD card 初始化及常用命令解析（附波形，uboot代码） - 程序员大本营_files/26d31e013daa4b95f6114634b2f10800.png"></p>
<p style="margin-left:0in;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color:#3f7f5f;">/* Reset the Card */</span></p>
<p style="margin-left:0in;"><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; err = mmc_go_idle(mmc);</span></p>
<p style="margin-left:0in;"><strong><span style="color:#7f0055;">static</span></strong> <strong><span style="color:#7f0055;">int</span></strong><span style="color:#000000;"> <strong>mmc_go_idle</strong>(</span><strong><span style="color:#7f0055;">struct</span></strong> <span style="color:#005032;">mmc</span><span style="color:#000000;"> *mmc)</span></p>
<p style="margin-left:0in;"><span style="color:#000000;">{</span></p>
<p style="margin-left:0in;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong><span style="color:#7f0055;">struct</span></strong> <span style="color:#005032;">mmc_cmd</span><span style="color:#000000;"> cmd;</span></p>
<p style="margin-left:0in;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong><span style="color:#7f0055;">int</span></strong><span style="color:#000000;"> err;</span></p>
<p style="margin-left:0in;">&nbsp;</p>
<p style="margin-left:0in;"><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; usleep(1000);</span></p>
<p style="margin-left:0in;"><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; cmd.</span><span style="color:#0000c0;">cmdidx</span><span style="color:#000000;"> = MMC_CMD_GO_IDLE_STATE;</span></p>
<p style="margin-left:0in;"><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; cmd.</span><span style="color:#0000c0;">cmdarg</span><span style="color:#000000;"> = 0;</span></p>
<p style="margin-left:0in;"><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; cmd.</span><span style="color:#0000c0;">resp_type</span><span style="color:#000000;"> = MMC_RSP_NONE;</span></p>
<p style="margin-left:0in;">&nbsp;</p>
<p style="margin-left:0in;"><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; err = mmc_send_cmd(mmc, &amp;cmd, NULL);</span></p>
<p style="margin-left:0in;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong><span style="color:#7f0055;">if</span></strong><span style="color:#000000;"> (err)</span></p>
<p style="margin-left:0in;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong><span style="color:#7f0055;">return</span></strong><span style="color:#000000;"> err;</span></p>
<p style="margin-left:0in;">&nbsp;</p>
<p style="margin-left:0in;"><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; usleep(2000);</span></p>
<p style="margin-left:0in;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong><span style="color:#7f0055;">return</span></strong><span style="color:#000000;"> 0;</span></p>
<p style="margin-left:0in;"><span style="color:#000000;">}</span><img alt="" src="./[SDIO] SD card 初始化及常用命令解析（附波形，uboot代码） - 程序员大本营_files/ae91097e24244c3434fe392f21dd32f8.png"></p>
<p style="margin-left:0in;">&nbsp;</p>
<p style="margin-left:0in;">&nbsp;</p>
<h2 id="2.cmd8" style="margin-left:0in;"><span style="color:#4f81bd;">2.cmd8</span></h2>
<p style="margin-left:0in;"><img alt="" src="./[SDIO] SD card 初始化及常用命令解析（附波形，uboot代码） - 程序员大本营_files/a8a2cd560e8583200053d419b6a8d997.png"></p>
<p style="margin-left:0in;"><img alt="" src="./[SDIO] SD card 初始化及常用命令解析（附波形，uboot代码） - 程序员大本营_files/816d9d49c93f011ffddd796ba428df7f.png"></p>
<p style="margin-left:0in;">R7:</p>
<p style="margin-left:0in;"><img alt="" src="./[SDIO] SD card 初始化及常用命令解析（附波形，uboot代码） - 程序员大本营_files/fc3d31bf39cc4993996b6536f6ade609.png"></p>
<p style="margin-left:0in;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color:#3f7f5f;">/* Test for SD version 2 */</span></p>
<p style="margin-left:0in;"><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; err = mmc_send_if_cond(mmc);</span></p>
<p style="margin-left:0in;"><strong><span style="color:#7f0055;">static</span></strong> <strong><span style="color:#7f0055;">int</span></strong><span style="color:#000000;"> <strong>mmc_send_if_cond</strong>(</span><strong><span style="color:#7f0055;">struct</span></strong> <span style="color:#005032;">mmc</span><span style="color:#000000;"> *mmc)</span></p>
<p style="margin-left:0in;"><span style="color:#000000;">{</span></p>
<p style="margin-left:0in;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong><span style="color:#7f0055;">struct</span></strong> <span style="color:#005032;">mmc_cmd</span><span style="color:#000000;"> cmd;</span></p>
<p style="margin-left:0in;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong><span style="color:#7f0055;">int</span></strong><span style="color:#000000;"> err;</span></p>
<p style="margin-left:0in;">&nbsp;</p>
<p style="margin-left:0in;">&nbsp;</p>
<p style="margin-left:0in;"><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; cmd.</span><span style="color:#0000c0;">cmdidx</span><span style="color:#000000;"> = SD_CMD_SEND_IF_COND;</span></p>
<p style="margin-left:0in;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color:#3f7f5f;">/* We set the bit if the host supports voltages between 2.7 and 3.6 V */</span></p>
<p style="margin-left:0in;"><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; cmd.</span><span style="color:#0000c0;">cmdarg</span><span style="color:#000000;"> = ((mmc-&gt;</span><span style="color:#0000c0;">cfg</span><span style="color:#000000;">-&gt;</span><span style="color:#0000c0;">voltages</span><span style="color:#000000;"> &amp; 0xff8000) != 0) &lt;&lt; 8 | 0xaa;</span></p>
<p style="margin-left:0in;"><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; cmd.</span><span style="color:#0000c0;">resp_type</span><span style="color:#000000;"> = MMC_RSP_R7;</span></p>
<p style="margin-left:0in;">&nbsp;</p>
<p style="margin-left:0in;"><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; err = mmc_send_cmd(mmc, &amp;cmd, NULL);</span></p>
<p style="margin-left:0in;">&nbsp;</p>
<p style="margin-left:0in;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong><span style="color:#7f0055;">if</span></strong><span style="color:#000000;"> (err)</span></p>
<p style="margin-left:0in;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong><span style="color:#7f0055;">return</span></strong><span style="color:#000000;"> err;</span></p>
<p style="margin-left:0in;">&nbsp;</p>
<p style="margin-left:0in;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong><span style="color:#7f0055;">if</span></strong><span style="color:#000000;"> ((cmd.</span><span style="color:#0000c0;">response</span><span style="color:#000000;">[0] &amp; 0xff) != 0xaa)</span></p>
<p style="margin-left:0in;"><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {</span></p>
<p style="margin-left:0in;"><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; debug(</span><span style="color:#2a00ff;">"UNUSABLE_ERR mmc_send_if_cond\n"</span><span style="color:#000000;">);</span></p>
<p style="margin-left:0in;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong><span style="color:#7f0055;">return</span></strong><span style="color:#000000;"> UNUSABLE_ERR;</span></p>
<p style="margin-left:0in;"><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</span></p>
<p style="margin-left:0in;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong><span style="color:#7f0055;">else</span></strong></p>
<p style="margin-left:0in;"><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; mmc-&gt;</span><span style="color:#0000c0;">version</span><span style="color:#000000;"> = SD_VERSION_2;</span></p>
<p style="margin-left:0in;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</p>
<p style="margin-left:0in;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong><span style="color:#7f0055;">return</span></strong><span style="color:#000000;"> 0;</span></p>
<p style="margin-left:0in;"><span style="color:#000000;">}</span></p>
<p style="margin-left:0in;"><img alt="" src="./[SDIO] SD card 初始化及常用命令解析（附波形，uboot代码） - 程序员大本营_files/5256bf87f58319eb82c8c36f952a6de3.png"></p>
<p style="margin-left:0in;"><img alt="" src="./[SDIO] SD card 初始化及常用命令解析（附波形，uboot代码） - 程序员大本营_files/a096703d4ac3baa43e486ddeac0928d0.png"></p>
<p style="margin-left:0in;">&nbsp;</p>
<h2 id="3.cmd55" style="margin-left:0in;"><span style="color:#4f81bd;">3.cmd55</span></h2>
<p style="margin-left:0in;">&nbsp;</p>
<p style="margin-left:0in;">ACMD:SD card application-specific commands.</p>
<p style="margin-left:0in;">在发所有的ACMD之前，需要先发APP_CMD（CMD55）通知SD卡下一个指令为ACMD。SD卡应答R1，然后才能发送ACMD。</p>
<p style="margin-left:0in;"><img alt="" src="./[SDIO] SD card 初始化及常用命令解析（附波形，uboot代码） - 程序员大本营_files/bc8399cac6d3dd7de440fa8420c3e398.png"></p>
<p style="margin-left:0in;"><img alt="" src="./[SDIO] SD card 初始化及常用命令解析（附波形，uboot代码） - 程序员大本营_files/ebb72016e91b81427b420d8146ae9480.png"></p>
<p style="margin-left:0in;"><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; cmd.</span><span style="color:#0000c0;">cmdidx</span><span style="color:#000000;"> = MMC_CMD_APP_CMD;</span></p>
<p style="margin-left:0in;"><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; cmd.</span><span style="color:#0000c0;">resp_type</span><span style="color:#000000;"> = MMC_RSP_R1;</span></p>
<p style="margin-left:0in;"><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; cmd.</span><span style="color:#0000c0;">cmdarg</span><span style="color:#000000;"> = 0;</span></p>
<p style="margin-left:0in;">&nbsp;</p>
<p style="margin-left:0in;"><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; err = mmc_send_cmd(mmc, &amp;cmd, NULL);</span></p>
<h2 id="4.acmd41" style="margin-left:0in;"><span style="color:#4f81bd;">4.acmd41</span></h2>
<p style="margin-left:0in;">&nbsp;</p>
<p style="margin-left:0in;"><span style="color:#4f4f4f;">卡片的<strong><b style="color:black;background-color:#A0FFFF">初始化</b></strong>将在主机发送</span><strong><span style="color:#4f4f4f;">ACMD41</span></strong><span style="color:#4f4f4f;">命令后开始，主机<strong>每间隔</strong></span><strong><span style="color:#4f4f4f;">1</span></strong><strong><span style="color:#4f4f4f;">秒</span></strong><span style="color:#4f4f4f;">就发送一次</span><span style="color:#4f4f4f;"> ACMD41 </span><span style="color:#4f4f4f;">命令，直到<b style="color:black;background-color:#A0FFFF">初始化</b>完成（</span><strong><span style="color:#4f4f4f;">OCR </span></strong><strong><span style="color:#4f4f4f;">寄存器的</span></strong><strong><span style="color:#4f4f4f;"> bit31 </span></strong><strong><span style="color:#4f4f4f;">置位</span></strong><span style="color:#4f4f4f;">）</span><span style="color:#4f4f4f;">。</span></p>
<p style="margin-left:0in;">&nbsp;</p>
<p style="margin-left:0in;"><img alt="" src="./[SDIO] SD card 初始化及常用命令解析（附波形，uboot代码） - 程序员大本营_files/646381191e64cd7965261b97434bda0c.png"></p>
<p style="margin-left:0in;"><img alt="" src="./[SDIO] SD card 初始化及常用命令解析（附波形，uboot代码） - 程序员大本营_files/2a463803493ddf611c8ff3fdb5ba19a4.png"></p>
<p style="margin-left:0in;">&nbsp;</p>
<p style="margin-left:0in;"><img alt="" src="./[SDIO] SD card 初始化及常用命令解析（附波形，uboot代码） - 程序员大本营_files/00b23ee87d83676fb842bf83e726955c.png"></p>
<p style="margin-left:0in;"><img alt="" src="./[SDIO] SD card 初始化及常用命令解析（附波形，uboot代码） - 程序员大本营_files/5329cedc4c9daac097c24a6b834f93a6.png"></p>
<p style="margin-left:0in;"><span style="color:#4f4f4f;">（</span><strong><span style="color:#4f4f4f;">bit 31</span></strong><span style="color:#4f4f4f;">）指示卡片的上电操作是否完成</span></p>
<p style="margin-left:0in;"><span style="color:#4f4f4f;">（</span><strong><span style="color:#4f4f4f;">bit 30</span></strong><span style="color:#4f4f4f;">）指示卡片的容量状态（</span><span style="color:#4f4f4f;">0</span><span style="color:#4f4f4f;">代表</span><span style="color:#4f4f4f;">SDSC</span><span style="color:#4f4f4f;">、</span><span style="color:#4f4f4f;">1</span><span style="color:#4f4f4f;">代表</span><span style="color:#4f4f4f;">SDHC</span><span style="color:#4f4f4f;">或者</span><span style="color:#4f4f4f;">SDXC</span><span style="color:#4f4f4f;">）</span></p>
<p style="margin-left:0in;">&nbsp;</p>
<p style="margin-left:0in;"><img alt="" src="./[SDIO] SD card 初始化及常用命令解析（附波形，uboot代码） - 程序员大本营_files/479b02a15bab0e5c7ea476e702a03910.png"></p>
<p style="margin-left:0in;">上图OCR <span style="color:#4f4f4f;">（</span><strong><span style="color:#4f4f4f;">bit 31</span></strong><span style="color:#4f4f4f;">）为</span><span style="color:#4f4f4f;">0</span><span style="color:#4f4f4f;">，即为卡</span><span style="color:#4f4f4f;">busy</span></p>
<p style="margin-left:0in;">&nbsp;</p>
<p style="margin-left:0in;"><img alt="" src="./[SDIO] SD card 初始化及常用命令解析（附波形，uboot代码） - 程序员大本营_files/97351aa4e65aafe031dfab926ee978fc.png"></p>
<p style="margin-left:0in;">上图OCR <span style="color:#4f4f4f;">（</span><strong><span style="color:#4f4f4f;">bit 31</span></strong><span style="color:#4f4f4f;">）为</span><span style="color:#4f4f4f;">1</span><span style="color:#4f4f4f;">，即为卡<b style="color:black;background-color:#A0FFFF">初始化</b>完成</span></p>
<p style="margin-left:0in;">&nbsp;</p>
<p style="margin-left:0in;"><strong><span style="color:#7f0055;">static</span></strong> <strong><span style="color:#7f0055;">int</span></strong><span style="color:#000000;"> <strong>sd_send_op_cond</strong>(</span><strong><span style="color:#7f0055;">struct</span></strong> <span style="color:#005032;">mmc</span><span style="color:#000000;"> *mmc) </span><span style="color:#3f7f5f;">//send acmd41-- get <u>ocr</u> data</span></p>
<p style="margin-left:0in;"><span style="color:#000000;">{</span></p>
<p style="margin-left:0in;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong><span style="color:#7f0055;">int</span></strong><span style="color:#000000;"> timeout = 1000;</span></p>
<p style="margin-left:0in;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong><span style="color:#7f0055;">int</span></strong><span style="color:#000000;"> err;</span></p>
<p style="margin-left:0in;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong><span style="color:#7f0055;">struct</span></strong> <span style="color:#005032;">mmc_cmd</span><span style="color:#000000;"> cmd;</span></p>
<p style="margin-left:0in;">&nbsp;</p>
<p style="margin-left:0in;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong><span style="color:#7f0055;">while</span></strong><span style="color:#000000;"> (1) </span></p>
<p style="margin-left:0in;"><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {</span></p>
<p style="margin-left:0in;"><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; cmd.</span><span style="color:#0000c0;">cmdidx</span><span style="color:#000000;"> = MMC_CMD_APP_CMD;</span></p>
<p style="margin-left:0in;"><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; cmd.</span><span style="color:#0000c0;">resp_type</span><span style="color:#000000;"> = MMC_RSP_R1;</span></p>
<p style="margin-left:0in;"><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; cmd.</span><span style="color:#0000c0;">cmdarg</span><span style="color:#000000;"> = 0;</span></p>
<p style="margin-left:0in;">&nbsp;</p>
<p style="margin-left:0in;"><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; err = mmc_send_cmd(mmc, &amp;cmd, NULL);</span></p>
<p style="margin-left:0in;">&nbsp;</p>
<p style="margin-left:0in;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong><span style="color:#7f0055;">if</span></strong><span style="color:#000000;"> (err)</span></p>
<p style="margin-left:0in;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong><span style="color:#7f0055;">return</span></strong><span style="color:#000000;"> err;</span></p>
<p style="margin-left:0in;">&nbsp;</p>
<p style="margin-left:0in;"><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; cmd.</span><span style="color:#0000c0;">cmdidx</span><span style="color:#000000;"> = SD_CMD_APP_SEND_OP_COND;</span></p>
<p style="margin-left:0in;"><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; cmd.</span><span style="color:#0000c0;">resp_type</span><span style="color:#000000;"> = MMC_RSP_R3;</span></p>
<p style="margin-left:0in;">&nbsp;</p>
<p style="margin-left:0in;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color:#3f7f5f;">/*</span></p>
<p style="margin-left:0in;"><span style="color:#3f7f5f;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;* Most cards do not answer if some reserved bits</span></p>
<p style="margin-left:0in;"><span style="color:#3f7f5f;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;* in the <u>ocr</u> are set. However, Some controller</span></p>
<p style="margin-left:0in;"><span style="color:#3f7f5f;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;* can set bit 7 (reserved for low voltages), but</span></p>
<p style="margin-left:0in;"><span style="color:#3f7f5f;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;* how to manage low voltages SD card is not yet</span></p>
<p style="margin-left:0in;"><span style="color:#3f7f5f;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;* specified.</span></p>
<p style="margin-left:0in;"><span style="color:#3f7f5f;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;*/</span></p>
<p style="margin-left:0in;"><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; cmd.</span><span style="color:#0000c0;">cmdarg</span><span style="color:#000000;"> = mmc_host_is_spi(mmc) ? 0 :</span></p>
<p style="margin-left:0in;"><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (mmc-&gt;</span><span style="color:#0000c0;">voltages</span><span style="color:#000000;"> &amp; 0xff8000);</span></p>
<p style="margin-left:0in;">&nbsp;</p>
<p style="margin-left:0in;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong><span style="color:#7f0055;">if</span></strong><span style="color:#000000;"> (mmc-&gt;</span><span style="color:#0000c0;">version</span><span style="color:#000000;"> == SD_VERSION_2)</span></p>
<p style="margin-left:0in;"><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; cmd.</span><span style="color:#0000c0;">cmdarg</span><span style="color:#000000;"> |= OCR_HCS;</span></p>
<p style="margin-left:0in;">&nbsp;</p>
<p style="margin-left:0in;"><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; err = mmc_send_cmd(mmc, &amp;cmd, NULL);</span></p>
<p style="margin-left:0in;">&nbsp;</p>
<p style="margin-left:0in;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong><span style="color:#7f0055;">if</span></strong><span style="color:#000000;"> (err)</span></p>
<p style="margin-left:0in;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong><span style="color:#7f0055;">return</span></strong><span style="color:#000000;"> err;</span></p>
<p style="margin-left:0in;">&nbsp;</p>
<p style="margin-left:0in;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong><span style="color:#7f0055;">if</span></strong><span style="color:#000000;"> (cmd.</span><span style="color:#0000c0;">response</span><span style="color:#000000;">[0] &amp; OCR_BUSY)</span><span style="color:#FF0000;">//</span><strong><span style="color:#FF0000;">等待</span></strong><strong><span style="color:#FF0000;">OCR[31]</span></strong><strong><span style="color:#FF0000;">置</span></strong><strong><span style="color:#FF0000;">1</span></strong><strong><span style="color:#FF0000;">后跳出循环，完成<b style="color:black;background-color:#A0FFFF">初始化</b>。</span></strong></p>
<p style="margin-left:0in;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong><span style="color:#7f0055;">break</span></strong><span style="color:#000000;">;</span></p>
<p style="margin-left:0in;">&nbsp;</p>
<p style="margin-left:0in;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong><span style="color:#7f0055;">if</span></strong><span style="color:#000000;"> (timeout-- &lt;= 0)</span></p>
<p style="margin-left:0in;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong><span style="color:#7f0055;">return</span></strong><span style="color:#000000;"> -EOPNOTSUPP;</span></p>
<p style="margin-left:0in;">&nbsp;</p>
<p style="margin-left:0in;"><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; usleep(1000);</span></p>
<p style="margin-left:0in;"><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</span></p>
<p style="margin-left:0in;">&nbsp;</p>
<h2 id="5.cmd2" style="margin-left:0in;"><span style="color:#4f81bd;">5.cmd2</span></h2>
<p style="margin-left:0in;">CMD2，验证SD卡是否接入，获取(CID)</p>
<p style="margin-left:0in;"><img alt="" src="./[SDIO] SD card 初始化及常用命令解析（附波形，uboot代码） - 程序员大本营_files/20a27da85958ddfca9a279ca42b284a7.png"><span style="color:#000000;"> </span></p>
<p style="margin-left:0in;"><img alt="" src="./[SDIO] SD card 初始化及常用命令解析（附波形，uboot代码） - 程序员大本营_files/df279e12534a9e4ac5cc3623d2a58d99.png"></p>
<p style="margin-left:0in;"><img alt="" src="./[SDIO] SD card 初始化及常用命令解析（附波形，uboot代码） - 程序员大本营_files/74416a56f8d294a6a2a5b0f31fb155b7.png"></p>
<p style="margin-left:0in;">&nbsp;</p>
<p style="margin-left:0in;"><img alt="" src="./[SDIO] SD card 初始化及常用命令解析（附波形，uboot代码） - 程序员大本营_files/bd093a3f3a971984cc393885c8d4d1b9.png"></p>
<p style="margin-left:0in;"><img alt="" src="./[SDIO] SD card 初始化及常用命令解析（附波形，uboot代码） - 程序员大本营_files/71b48f828cb226eaf137f88ab7c2bd05.png"></p>
<p style="margin-left:0in;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color:#3f7f5f;">/* Put the Card in Identify Mode */</span></p>
<p style="margin-left:0in;"><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; cmd.</span><span style="color:#0000c0;">cmdidx</span><span style="color:#000000;"> = mmc_host_is_spi(mmc) ? MMC_CMD_SEND_CID :</span></p>
<p style="margin-left:0in;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong><span style="color:#FF0000;">MMC_CMD_ALL_SEND_CID</span></strong><span style="color:#000000;">; </span><span style="color:#3f7f5f;">/* <u>cmd</u> not supported in <u>spi</u> */</span></p>
<p style="margin-left:0in;"><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; cmd.</span><span style="color:#0000c0;">resp_type</span><span style="color:#000000;"> = MMC_RSP_R2;</span></p>
<p style="margin-left:0in;"><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; cmd.</span><span style="color:#0000c0;">cmdarg</span><span style="color:#000000;"> = 0;</span></p>
<p style="margin-left:0in;">&nbsp;</p>
<p style="margin-left:0in;"><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; err = mmc_send_cmd(mmc, &amp;cmd, NULL);</span></p>
<p style="margin-left:0in;">&nbsp;</p>
<p style="margin-left:0in;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong><span style="color:#7f0055;">if</span></strong><span style="color:#000000;"> (err)</span></p>
<p style="margin-left:0in;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong><span style="color:#7f0055;">return</span></strong><span style="color:#000000;"> err;</span></p>
<p style="margin-left:0in;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong><span style="color:#FF0000;">memcpy((void*)mmc-&gt;cid, (void*)cmd.response, 16);</span></strong></p>
<p style="margin-left:0in;">&nbsp;</p>
<h2 id="6.cmd3" style="margin-left:0in;"><span style="color:#4f81bd;">6.cmd3</span></h2>
<p style="margin-left:0in;">&nbsp;</p>
<p style="margin-left:0in;">读取卡相对地址RCA,<span style="color:#4f4f4f;"> 当卡收到RCA(CMD3)后，卡就会进入数据传输模式。</span></p>
<p style="margin-left:0in;"><img alt="" src="./[SDIO] SD card 初始化及常用命令解析（附波形，uboot代码） - 程序员大本营_files/6bd0c6eb1df42d737566079649ff4cd4.png"></p>
<p style="margin-left:0in;"><img alt="" src="./[SDIO] SD card 初始化及常用命令解析（附波形，uboot代码） - 程序员大本营_files/6d520c14a9ab3dc08f02f52098fa7b1a.png"></p>
<p style="margin-left:0in;">&nbsp;</p>
<p style="margin-left:0in;"><img alt="" src="./[SDIO] SD card 初始化及常用命令解析（附波形，uboot代码） - 程序员大本营_files/084dc52bca0f7b312cc9e3e459200867.png"></p>
<p style="margin-left:0in;"><img alt="" src="./[SDIO] SD card 初始化及常用命令解析（附波形，uboot代码） - 程序员大本营_files/084dc52bca0f7b312cc9e3e459200867.png"></p>
<p style="margin-left:0in;"><img alt="" src="./[SDIO] SD card 初始化及常用命令解析（附波形，uboot代码） - 程序员大本营_files/81766323ca9d45cae2796af855bd246a.png"></p>
<p style="margin-left:0in;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color:#3f7f5f;">/*</span></p>
<p style="margin-left:0in;"><span style="color:#3f7f5f;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;* For MMC cards, set the Relative Address.</span></p>
<p style="margin-left:0in;"><span style="color:#3f7f5f;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;* For SD cards, get the <u>Relatvie</u> Address.</span></p>
<p style="margin-left:0in;"><span style="color:#3f7f5f;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;* This also puts the cards into Standby State</span></p>
<p style="margin-left:0in;"><span style="color:#3f7f5f;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;*/</span></p>
<p style="margin-left:0in;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong><span style="color:#7f0055;">if</span></strong><span style="color:#000000;"> (!mmc_host_is_spi(mmc)) { </span><span style="color:#3f7f5f;">/* <u>cmd</u> not supported in <u>spi</u> */</span></p>
<p style="margin-left:0in;"><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; cmd.</span><span style="color:#0000c0;">cmdidx</span><span style="color:#000000;"> = SD_CMD_SEND_RELATIVE_ADDR;</span></p>
<p style="margin-left:0in;"><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; cmd.</span><span style="color:#0000c0;">cmdarg</span><span style="color:#000000;"> = mmc-&gt;</span><span style="color:#0000c0;">rca</span><span style="color:#000000;"> &lt;&lt; 16;</span></p>
<p style="margin-left:0in;"><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; cmd.</span><span style="color:#0000c0;">resp_type</span><span style="color:#000000;"> = MMC_RSP_R6;</span></p>
<p style="margin-left:0in;">&nbsp;</p>
<p style="margin-left:0in;"><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; err = mmc_send_cmd(mmc, &amp;cmd, NULL);</span></p>
<p style="margin-left:0in;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong><span style="color:#7f0055;">if</span></strong><span style="color:#000000;"> (err)</span></p>
<p style="margin-left:0in;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong><span style="color:#7f0055;">return</span></strong><span style="color:#000000;"> err;</span></p>
<p style="margin-left:0in;">&nbsp;</p>
<p style="margin-left:0in;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong><span style="color:#7f0055;">if</span></strong><span style="color:#000000;"> (IS_SD(mmc))</span></p>
<p style="margin-left:0in;"><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; mmc-&gt;</span><span style="color:#0000c0;">rca</span><span style="color:#000000;"> = (cmd.</span><span style="color:#0000c0;">response</span><span style="color:#000000;">[0] &gt;&gt; 16) &amp; 0xffff;</span></p>
<p style="margin-left:0in;"><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</span></p>
<p style="margin-left:0in;">&nbsp;</p>
<h2 id="7.cmd9" style="margin-left:0in;"><span style="color:#4f81bd;">7.cmd9</span></h2>
<p style="margin-left:0in;">&nbsp;</p>
<p style="margin-left:0in;">CMD9，读取CSD寄存器获取卡的相关信息</p>
<p style="margin-left:0in;">RCA是之前CMD3读取到的卡RCA</p>
<p style="margin-left:0in;"><img alt="" src="./[SDIO] SD card 初始化及常用命令解析（附波形，uboot代码） - 程序员大本营_files/4ccb30a7990b8aab50a4321602daf384.png"></p>
<p style="margin-left:0in;"><img alt="" src="./[SDIO] SD card 初始化及常用命令解析（附波形，uboot代码） - 程序员大本营_files/0f06e6faba7d121b7af8362cf8946b26.png"></p>
<p style="margin-left:0in;"><img alt="" src="./[SDIO] SD card 初始化及常用命令解析（附波形，uboot代码） - 程序员大本营_files/e98ee8488496fa54d3c13b3533b9930d.png"></p>
<p style="margin-left:0in;">PS：R2回复CMD9时为CSD，回复CMD2时为CID</p>
<p style="margin-left:0in;">CSD（具体信息）寄存器也是 128 bits，提供了访问卡片内容的一些信息如：传输速率、数据格式、错误类型、最大是数据访问时间、DSR 寄存器是否启用的。其中 bit[126:127] 记录了 CSD 的版本号，CSD version 1.0 为标准容量卡所用，CSD version 2.0 为大容量或超大容量卡所用</p>
<p style="margin-left:0in;">---------------------</p>
<h2 id="8.cmd13" style="margin-left:0in;"><span style="color:#4f81bd;">8.cmd13</span></h2>
<p style="margin-left:0in;">读取卡状态</p>
<p style="margin-left:0in;">RCA是之前CMD3读取到的卡RCA</p>
<p style="margin-left:0in;">&nbsp;</p>
<p style="margin-left:0in;"><img alt="" src="./[SDIO] SD card 初始化及常用命令解析（附波形，uboot代码） - 程序员大本营_files/8915dbe2859a1c9cf37d0924f5e34041.png"></p>
<p style="margin-left:0in;">&nbsp;</p>
<p style="margin-left:0in;"><img alt="" src="./[SDIO] SD card 初始化及常用命令解析（附波形，uboot代码） - 程序员大本营_files/2d9a52ab0fb18d8d10b85f8e942ccdf1.png"></p>
<p>&nbsp;</p>
<p style="margin-left:0in;">&nbsp;</p>
<p style="margin-left:0in;">&nbsp;</p>
<h2 id="9.cmd7" style="margin-left:0in;"><span style="color:#4f81bd;">9.cmd7</span></h2>
<p style="margin-left:0in;">发送CMD7+RCA选中卡片, 发送CMD7+0不选中卡片，RCA是之前CMD3读取到的卡RCA</p>
<p style="margin-left:0in;"><img alt="" src="./[SDIO] SD card 初始化及常用命令解析（附波形，uboot代码） - 程序员大本营_files/8915dbe2859a1c9cf37d0924f5e34041.png"></p>
<p style="margin-left:0in;"><img alt="" src="./[SDIO] SD card 初始化及常用命令解析（附波形，uboot代码） - 程序员大本营_files/ac35645bcd41f3ecea06734e97fc4544.png"></p>
<p style="margin-left:0in;"><img alt="" src="./[SDIO] SD card 初始化及常用命令解析（附波形，uboot代码） - 程序员大本营_files/d7ad7b1c9b8f948a24ee40295542fd2f.png"></p>
<p style="margin-left:0in;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color:#3f7f5f;">/* Select the card, and put it into Transfer Mode */</span></p>
<p style="margin-left:0in;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong><span style="color:#7f0055;">if</span></strong><span style="color:#000000;"> (!mmc_host_is_spi(mmc)) { </span><span style="color:#3f7f5f;">/* <u>cmd</u> not supported in <u>spi</u> */</span></p>
<p style="margin-left:0in;"><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; cmd.</span><span style="color:#0000c0;">cmdidx</span><span style="color:#000000;"> = MMC_CMD_SELECT_CARD;</span></p>
<p style="margin-left:0in;"><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; cmd.</span><span style="color:#0000c0;">resp_type</span><span style="color:#000000;"> = MMC_RSP_R1;</span></p>
<p style="margin-left:0in;"><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; cmd.</span><span style="color:#0000c0;">cmdarg</span><span style="color:#000000;"> = mmc-&gt;</span><span style="color:#0000c0;">rca</span><span style="color:#000000;"> &lt;&lt; 16;</span></p>
<p style="margin-left:0in;"><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; err = mmc_send_cmd(mmc, &amp;cmd, NULL);</span></p>
<p style="margin-left:0in;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong><span style="color:#7f0055;">if</span></strong><span style="color:#000000;"> (err)</span></p>
<p style="margin-left:0in;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp; <strong><span style="color:#7f0055;">return</span></strong><span style="color:#000000;"> err;</span></p>
<p style="margin-left:0in;"><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</span></p>
<p style="margin-left:0in;">&nbsp;</p>
<h2 id="10.ACMD51" style="margin-left:0in;"><span style="color:#4f81bd;">10.ACMD51</span></h2>
<p style="margin-left:0in;"><span style="color:#000000;">发送</span><span style="color:#000000;">CMD55+ACMD51</span><span style="color:#000000;">读取</span><span style="color:#000000;">SCR</span><span style="color:#000000;">寄存器，</span><span style="color:#000000;">SD</span><span style="color:#000000;">卡可以通过该值获得位宽，如果是</span><span style="color:#000000;">MMC</span><span style="color:#000000;">卡则需要使用主线测试来确定卡的位宽。</span></p>
<p style="margin-left:0in;"><img alt="" src="./[SDIO] SD card 初始化及常用命令解析（附波形，uboot代码） - 程序员大本营_files/f19f11698ce2744aa1b21109bdc2730f.png"></p>
<p style="margin-left:0in;">PS：slave回复ACMD51是R1+data。SCR 是放在data中的，一共8个字节。</p>
<p style="margin-left:0in;">&nbsp;</p>
<p style="margin-left:0in;"><img alt="" src="./[SDIO] SD card 初始化及常用命令解析（附波形，uboot代码） - 程序员大本营_files/547623588fa8918304fd959ae2fb3212.png"></p>
<p style="margin-left:0in;"><img alt="" src="./[SDIO] SD card 初始化及常用命令解析（附波形，uboot代码） - 程序员大本营_files/c0b49e8c70267e14d45837a338ca9137.png"></p>
<p style="margin-left:0in;">&nbsp;</p>
<p style="margin-left:0in;"><img alt="" src="./[SDIO] SD card 初始化及常用命令解析（附波形，uboot代码） - 程序员大本营_files/2bb1377ea6bf7721da7415b148b2c994.png"></p>
<p style="margin-left:0in;"><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; cmd.</span><span style="color:#0000c0;">cmdidx</span><span style="color:#000000;"> = </span><strong><span style="color:#FF0000;">SD_CMD_APP_SEND_SCR;//51</span></strong></p>
<p style="margin-left:0in;"><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; cmd.</span><span style="color:#0000c0;">resp_type</span><span style="color:#000000;"> = MMC_RSP_R1;</span></p>
<p style="margin-left:0in;"><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; cmd.</span><span style="color:#0000c0;">cmdarg</span><span style="color:#000000;"> = 0;</span></p>
<p style="margin-left:0in;">&nbsp;</p>
<p style="margin-left:0in;"><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; timeout = 3;</span></p>
<p style="margin-left:0in;">&nbsp;</p>
<p style="margin-left:0in;"><span style="color:#000000;">&nbsp; retry_scr:</span></p>
<p style="margin-left:0in;"><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; data.</span><span style="color:#0000c0;">dest</span><span style="color:#000000;"> = (</span><strong><span style="color:#7f0055;">char</span></strong><span style="color:#000000;"> *)mmc-&gt;</span><span style="color:#0000c0;">scr</span><span style="color:#000000;">;</span></p>
<p style="margin-left:0in;"><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; data.</span><span style="color:#0000c0;">blocksize</span><span style="color:#000000;"> = 8;</span></p>
<p style="margin-left:0in;"><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; data.</span><span style="color:#0000c0;">blocks</span><span style="color:#000000;"> = 1;</span></p>
<p style="margin-left:0in;"><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; data.</span><span style="color:#0000c0;">flags</span><span style="color:#000000;"> = MMC_DATA_READ;</span></p>
<p style="margin-left:0in;">&nbsp;</p>
<p style="margin-left:0in;"><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; err = mmc_send_cmd(mmc, &amp;cmd, &amp;</span><span style="color:#FF0000;">data</span><span style="color:#000000;">);</span></p>
<p style="margin-left:0in;">&nbsp;</p>
<p style="margin-left:0in;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; <strong><span style="color:#7f0055;">if</span></strong><span style="color:#000000;"> (err) {</span></p>
<p style="margin-left:0in;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; <strong><span style="color:#7f0055;">if</span></strong><span style="color:#000000;"> (timeout--)</span></p>
<p style="margin-left:0in;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; <strong><span style="color:#7f0055;">goto</span></strong><span style="color:#000000;"> retry_scr;</span></p>
<p style="margin-left:0in;">&nbsp;</p>
<p style="margin-left:0in;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; <strong><span style="color:#7f0055;">return</span></strong><span style="color:#000000;"> err;</span></p>
<p style="margin-left:0in;"><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; }</span></p>
<p style="margin-left:0in;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;</p>
<p style="margin-left:0in;"><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; mmc-&gt;</span><span style="color:#0000c0;">scr</span><span style="color:#000000;">[0] = __be32_to_cpu(mmc-&gt;</span><span style="color:#0000c0;">scr</span><span style="color:#000000;">[0]);</span></p>
<p style="margin-left:0in;"><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; mmc-&gt;</span><span style="color:#0000c0;">scr</span><span style="color:#000000;">[1] = __be32_to_cpu(mmc-&gt;</span><span style="color:#0000c0;">scr</span><span style="color:#000000;">[1]);</span></p>
<p style="margin-left:0in;"><span style="color:#3f7f5f;">//&nbsp;&nbsp;&nbsp;&nbsp; debug("scr_0=0x%x scr_1=0x%x\n",<u>mmc</u>-&gt;<u>scr</u>[0],<u>mmc</u>-&gt;<u>scr</u>[1]);</span></p>
<p style="margin-left:0in;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;<strong><span style="color:#7f0055;">switch</span></strong> <strong><span style="color:#FF0000;">((mmc-&gt;scr[0] &gt;&gt; 24) &amp; 0xf) {//SD_SPEC</span></strong></p>
<p style="margin-left:0in;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;<strong><span style="color:#7f0055;">case</span></strong><span style="color:#000000;"> 0:</span></p>
<p style="margin-left:0in;"><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;mmc-&gt;</span><span style="color:#0000c0;">version</span><span style="color:#000000;"> = SD_VERSION_1_0;</span></p>
<p style="margin-left:0in;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;<strong><span style="color:#7f0055;">break</span></strong><span style="color:#000000;">;</span></p>
<p style="margin-left:0in;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;<strong><span style="color:#7f0055;">case</span></strong><span style="color:#000000;"> 1:</span></p>
<p style="margin-left:0in;"><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;mmc-&gt;</span><span style="color:#0000c0;">version</span><span style="color:#000000;"> = SD_VERSION_1_10;</span></p>
<p style="margin-left:0in;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;<strong><span style="color:#7f0055;">break</span></strong><span style="color:#000000;">;</span></p>
<p style="margin-left:0in;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;<strong><span style="color:#7f0055;">case</span></strong><span style="color:#000000;"> 2:</span></p>
<p style="margin-left:0in;"><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;mmc-&gt;</span><span style="color:#0000c0;">version</span><span style="color:#000000;"> = SD_VERSION_2;</span></p>
<p style="margin-left:0in;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;<strong><span style="color:#7f0055;">if</span></strong><span style="color:#000000;"> ((mmc-&gt;</span><span style="color:#0000c0;">scr</span><span style="color:#000000;">[0] &gt;&gt; 15) &amp; 0x1)</span></p>
<p style="margin-left:0in;"><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;mmc-&gt;</span><span style="color:#0000c0;">version</span><span style="color:#000000;"> = SD_VERSION_3;</span></p>
<p style="margin-left:0in;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;<strong><span style="color:#7f0055;">break</span></strong><span style="color:#000000;">;</span></p>
<p style="margin-left:0in;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;<strong><span style="color:#7f0055;">default</span></strong><span style="color:#000000;">:</span></p>
<p style="margin-left:0in;"><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;mmc-&gt;</span><span style="color:#0000c0;">version</span><span style="color:#000000;"> = SD_VERSION_1_0;</span></p>
<p style="margin-left:0in;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;<strong><span style="color:#7f0055;">break</span></strong><span style="color:#000000;">;</span></p>
<p style="margin-left:0in;"><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;}</span></p>
<p style="margin-left:0in;">&nbsp;</p>
<p style="margin-left:0in;">&nbsp;</p>
<p style="margin-left:0in;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; <strong><span style="color:#7f0055;">if</span></strong><span style="color:#000000;"> (mmc-&gt;</span><span style="color:#0000c0;">scr</span><span style="color:#000000;">[0] &amp; SD_DATA_4BIT)</span></p>
<p style="margin-left:0in;"><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; mmc-&gt;</span><span style="color:#0000c0;">card_caps</span><span style="color:#000000;"> |= MMC_MODE_4BIT;</span></p>
<h2 id="11.CMD6" style="margin-left:0in;"><span style="color:#4f81bd;">11.CMD6</span></h2>
<p style="margin-left:0in;">CMD6是SD卡速度模式切换的一个重要命令，它定义了4种不同的功能组：</p>
<ol><li>访问模式：SD总线接口速度模式的选择；</li>
<li>命令系统：通过一套莫共有的命令来扩展和控制特定的功能；</li>
<li>驱动强度：在UHS-I模式下等选择合适的输出驱动强度，和主机环境相关；</li>
<li>电流/功率限制：UHS-I卡在UHS-I模式选择，和主机环境相关；</li>
</ol><p style="margin-left:0in;"><img alt="" src="./[SDIO] SD card 初始化及常用命令解析（附波形，uboot代码） - 程序员大本营_files/08615c5b2c92f0de5f75bad3a2714769.png"></p>
<p style="margin-left:0in;">&nbsp;</p>
<p style="margin-left:0in;"><img alt="https://upload-images.jianshu.io/upload_images/726783-0f3f6c64bd8b7f0a.png?imageMogr2/auto-orient/" id="Picture_x0020_9" src="./[SDIO] SD card 初始化及常用命令解析（附波形，uboot代码） - 程序员大本营_files/249181c0e6a39538ba957328bd65b6d5.png"></p>
<p style="margin-left:0in;">&nbsp;</p>
<p style="margin-left:0in;">MODE0: 查询模式，卡返回R1 + data[511:0]</p>
<p style="margin-left:0in;">data中存放了卡对每种功能的支持情况及当前选中的功能状态，及忙状态。</p>
<p style="margin-left:0in;"><img alt="" src="./[SDIO] SD card 初始化及常用命令解析（附波形，uboot代码） - 程序员大本营_files/5701ecb2de3285f379f59b621ea4d765.png"></p>
<p style="margin-left:0in;"><img alt="" src="./[SDIO] SD card 初始化及常用命令解析（附波形，uboot代码） - 程序员大本营_files/e52b4aedeeadea9d4136833ada5ae01a.png"></p>
<p style="margin-left:0in;"><img alt="" src="./[SDIO] SD card 初始化及常用命令解析（附波形，uboot代码） - 程序员大本营_files/e1b13f7a48d9b9a300c153e6341062dd.png"></p>
<p style="margin-left:0in;">&nbsp;</p>
<p style="margin-left:0in;">MODE1: 切换模式</p>
<p style="margin-left:0in;">每次发送切换只能选中一个功能组进行切换，其他功能组全部为1.</p>
<p style="margin-left:0in;"><strong><span style="color:#7f0055;">static</span></strong> <strong><span style="color:#7f0055;">int</span></strong><span style="color:#000000;"> <strong>sd_switch</strong>(</span><strong><span style="color:#7f0055;">struct</span></strong> <span style="color:#005032;">mmc</span><span style="color:#000000;"> *mmc, </span><strong><span style="color:#7f0055;">int</span></strong><span style="color:#000000;"> mode, </span><strong><span style="color:#7f0055;">int</span></strong><span style="color:#000000;"> group, </span><span style="color:#005032;">u8</span><span style="color:#000000;"> value, </span><span style="color:#005032;">u8</span><span style="color:#000000;"> *resp)</span></p>
<p style="margin-left:0in;"><span style="color:#000000;">{</span></p>
<p style="margin-left:0in;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong><span style="color:#7f0055;">struct</span></strong> <span style="color:#005032;">mmc_cmd</span><span style="color:#000000;"> cmd;</span></p>
<p style="margin-left:0in;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong><span style="color:#7f0055;">struct</span></strong> <span style="color:#005032;">mmc_data</span><span style="color:#000000;"> data;</span></p>
<p style="margin-left:0in;">&nbsp;</p>
<p style="margin-left:0in;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color:#3f7f5f;">/* Switch the frequency */</span></p>
<p style="margin-left:0in;"><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; cmd.</span><span style="color:#0000c0;">cmdidx</span><span style="color:#000000;"> = SD_CMD_SWITCH_FUNC;</span></p>
<p style="margin-left:0in;"><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; cmd.</span><span style="color:#0000c0;">resp_type</span><span style="color:#000000;"> = MMC_RSP_R1;</span></p>
<p style="margin-left:0in;"><strong><span style="color:#FF0000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; cmd.cmdarg = (mode &lt;&lt; 31) | 0xffffff;</span></strong></p>
<p style="margin-left:0in;"><strong><span style="color:#FF0000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; cmd.cmdarg &amp;= ~(0xf &lt;&lt; (group &lt;&lt; 2));</span></strong></p>
<p style="margin-left:0in;"><strong><span style="color:#FF0000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; cmd.cmdarg |= value &lt;&lt; (group &lt;&lt; 2);</span></strong></p>
<p style="margin-left:0in;">&nbsp;</p>
<p style="margin-left:0in;"><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; data.</span><span style="color:#0000c0;">dest</span><span style="color:#000000;"> = (</span><strong><span style="color:#7f0055;">char</span></strong><span style="color:#000000;"> *)resp;</span></p>
<p style="margin-left:0in;"><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; data.</span><span style="color:#0000c0;">blocksize</span><span style="color:#000000;"> = 64;</span></p>
<p style="margin-left:0in;"><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; data.</span><span style="color:#0000c0;">blocks</span><span style="color:#000000;"> = 1;</span></p>
<p style="margin-left:0in;"><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; data.</span><span style="color:#0000c0;">flags</span><span style="color:#000000;"> = MMC_DATA_READ;</span></p>
<p style="margin-left:0in;">&nbsp;</p>
<p style="margin-left:0in;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong><span style="color:#7f0055;">return</span></strong><span style="color:#000000;"> mmc_send_cmd(mmc, &amp;cmd, &amp;data);</span></p>
<p style="margin-left:0in;">&nbsp;</p>
<p style="margin-left:0in;"><span style="color:#000000;">}</span></p>
<h2 id="12.CMD16" style="margin-left:0in;"><br><span style="color:#4f81bd;">12.CMD16</span></h2>
<p style="margin-left:0in;">设置块大小</p>
<p style="margin-left:0in;"><img alt="" src="./[SDIO] SD card 初始化及常用命令解析（附波形，uboot代码） - 程序员大本营_files/0a8b611670fa80d7a2c567ff1d70e095.png"></p>
<p style="margin-left:0in;">&nbsp;</p>
<h2 id="13.CMD17" style="margin-left:0in;"><span style="color:#4f81bd;">13.CMD17</span></h2>
<p style="margin-left:0in;">读单个块参数为block地址</p>
<p style="margin-left:0in;"><img alt="" src="./[SDIO] SD card 初始化及常用命令解析（附波形，uboot代码） - 程序员大本营_files/310bd0975cfdedf78a881ee36ad1edec.png"></p>
<p style="margin-left:0in;"><img alt="" src="./[SDIO] SD card 初始化及常用命令解析（附波形，uboot代码） - 程序员大本营_files/ceed07fcc343ff51d043b6b9edea8d9e.png"></p>
<p style="margin-left:0in;">卡回复R1 +DATA</p>
<h2 id="14.CMD18" style="margin-left:0in;"><span style="color:#4f81bd;">14.CMD18</span></h2>
<p style="margin-left:0in;">读多块</p>
<p style="margin-left:0in;"><img alt="" src="./[SDIO] SD card 初始化及常用命令解析（附波形，uboot代码） - 程序员大本营_files/5a234d3a62935b369889ba35352bd15d.png"></p>
<p style="margin-left:0in;"><img alt="" src="./[SDIO] SD card 初始化及常用命令解析（附波形，uboot代码） - 程序员大本营_files/941e7e10ce12605f5ebe5bcd24a99fb1.png"></p>
<p style="margin-left:0in;">&nbsp;</p>
<h2 id="15.CMD12" style="margin-left:0in;"><span style="color:#4f81bd;">15.CMD12</span></h2>
<p style="margin-left:0in;">停止传输</p>
<p style="margin-left:0in;"><img alt="" src="./[SDIO] SD card 初始化及常用命令解析（附波形，uboot代码） - 程序员大本营_files/9d65b5a9180011874f7a1f82ff99ab8d.png"></p>
<p style="margin-left:0in;"><img alt="" src="./[SDIO] SD card 初始化及常用命令解析（附波形，uboot代码） - 程序员大本营_files/579cdf9ddf709b8b33745b96e33d043c.png"></p>
<p style="margin-left:0in;">&nbsp;</p>
<h1 id="tuning" style="margin-left:0in;"><span style="color:#365f91;">tuning</span></h1>
<h2 id="CMD19" style="margin-left:0in;"><span style="color:#4f81bd;">CMD19</span></h2>
<p style="margin-left:0in;">发送tuning block</p>
<p style="margin-left:0in;"><img alt="" src="./[SDIO] SD card 初始化及常用命令解析（附波形，uboot代码） - 程序员大本营_files/05bf2d3c0aed00691a8db0edc6ef9d29.png"></p>
<p style="margin-left:0in;"><img alt="" src="./[SDIO] SD card 初始化及常用命令解析（附波形，uboot代码） - 程序员大本营_files/513d778bb17798a688044ce5d765915d.png"></p>
<p style="margin-left:0in;"><img alt="" src="./[SDIO] SD card 初始化及常用命令解析（附波形，uboot代码） - 程序员大本营_files/3eb281075534472bc85f7130dfede3a0.png"></p>
<p style="margin-left:0in;">host发送CMD19，卡回复R1+data，tuning data 的数据长度及内容是固定的，host可以根据收到的数据调整采样的timing。</p>
<p style="margin-left:0in;">&nbsp;</p>
<h2 id="DW_SDHCI%E7%9A%84tuning%E6%B5%81%E7%A8%8B" style="margin-left:0in;"><span style="color:#4f81bd;">DW_SDHCI的tuning流程</span></h2>
<p style="margin-left:0in;"><img alt="" src="./[SDIO] SD card 初始化及常用命令解析（附波形，uboot代码） - 程序员大本营_files/2792dde6bee4a9c94356ef2d848eff5b.png"></p>
</div><div id="ad_after_content">
<div id="protag-after_content"></div>

</div>
</div>
<div id="mbads2">
<div id="adplus-native">
<div id="protag-native-after_content"></div>

</div>
</div>
<div style="float:right;">
<div class="article-copyright">
<span class="creativecommons"> <a rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/"> </a> <span>
版权声明：本文为博主原创文章，遵循<a href="https://creativecommons.org/licenses/by-sa/4.0/" target="_blank" rel="noopener"> CC 4.0 BY-SA </a>版权协议，转载请附上原文出处链接和本声明。
</span>
<div class="article-source-link2222">
本文链接：<a href="https://blog.csdn.net/u010443710/article/details/107014873" target="_blank">https://blog.csdn.net/u010443710/article/details/107014873</a>
</div>
</span>
</div>
</div>
<div style="clear:both;"></div>
<div id="cprt" style="float:right;font-size:12px;padding-top:15px;">
<a href="https://www.pianshen.com/copyright.html#del" rel="nofollow,noindex" target="_blank">原作者删帖</a>&nbsp;&nbsp;
<a href="https://www.pianshen.com/copyright.html#others" rel="nofollow,noindex" target="_blank">不实内容删帖</a>&nbsp;&nbsp;
<a href="https://www.pianshen.com/cdn-cgi/l/email-protection#bdcdd4dcd3ced5d8d3fddad0c593ded2d082cec8dfd7d8dec9805b37285512345b21115b2b3a582d16580402582c375b352b58233e58210359021c5b3c1252013555120a542439590537550220551a39542e035b331858210d58203d520134" title="投诉本文含广告或垃圾信息">广告或垃圾文章投诉</a>
</div>
<div style="clear:both;"></div>
<div id="bottomads">
<iframe id="pianshen.com_728x90_responsive_DFP" frameborder="0" scrolling="no" marginheight="0" marginwidth="0" topmargin="0" leftmargin="0" width="728" height="90" src="./[SDIO] SD card 初始化及常用命令解析（附波形，uboot代码） - 程序员大本营_files/saved_resource(1).html"></iframe>

</div>
<hr>
<h3><span>智能推荐</span></h3>
<div>
<div>
<div style="padding-top:6px;padding-bottom:6px;">
<div class="loop-wrap clearfix">
<div class="loop-thumb">
<a href="https://www.pianshen.com/article/6064569275/"><img style="width:172px;height:120px;" src="./[SDIO] SD card 初始化及常用命令解析（附波形，uboot代码） - 程序员大本营_files/8202ab435d4221343368319bd30bd729.png">
</a>
</div>
<header class="loop-data">
<h3 style="margin-top:0px;border-bottom-style: none;padding-bottom: 0px;margin-bottom: 0px;line-height:30px;">
<a href="https://www.pianshen.com/article/6064569275/" rel="bookmark" title="Linux SD/MMC/SDIO驱动分析">Linux SD/MMC/<b style="color:black;background-color:#ffff66">SDIO</b>驱动分析</a>
</h3>
</header>
<div class="mh-excerpt">
<p style="line-height:25px;">一、SD/MMC/<b style="color:black;background-color:#ffff66">SDIO</b>概念区分 SD（SecureDigital）与&nbsp;MMC（MultimediaCard） SD&nbsp;是一种&nbsp;flash memory card&nbsp;的标准，也就是一般常见的&nbsp;SD&nbsp;记忆卡，而&nbsp;MMC&nbsp;则是较早的一种记忆卡标准，目前已经被&nbsp;SD&nbsp;标准所取代。在维基百科上有相当详细的&amp;n...</p>
</div>
</div>
</div>
</div>
</div>
<div>
<div>
<div style="padding-top:6px;padding-bottom:6px;">
<div class="loop-wrap clearfix">
<div class="loop-thumb">
<a href="https://www.pianshen.com/article/5576737811/"><img style="width:172px;height:120px;" src="./[SDIO] SD card 初始化及常用命令解析（附波形，uboot代码） - 程序员大本营_files/0701f2cebe29a8719b0fdd820f64434f.png">
</a>
</div>
<header class="loop-data">
<h3 style="margin-top:0px;border-bottom-style: none;padding-bottom: 0px;margin-bottom: 0px;line-height:30px;">
<a href="https://www.pianshen.com/article/5576737811/" rel="bookmark" title="Linux SD/MMC/SDIO驱动分析">Linux SD/MMC/<b style="color:black;background-color:#ffff66">SDIO</b>驱动分析</a>
</h3>
</header>
<div class="mh-excerpt">
<p style="line-height:25px;">origin: https://www.cnblogs.com/cslunatic/p/3678045.html Linux SD/MMC/<b style="color:black;background-color:#ffff66">SDIO</b>驱动分析 一、SD/MMC/<b style="color:black;background-color:#ffff66">SDIO</b>概念区分 SD（SecureDigital）与&nbsp;MMC（MultimediaCard） SD&nbsp;是一种&nbsp;flash memory card&nbsp;的标准，也就是一般常见的&nbsp;S...</p>
</div>
</div>
</div>
</div>
</div>
<div>
<div>
<div style="padding-top:6px;padding-bottom:6px;">
<div class="loop-wrap clearfix">
<div class="loop-thumb">
<a href="https://www.pianshen.com/article/1597917029/"><img style="width:172px;height:120px;" src="./[SDIO] SD card 初始化及常用命令解析（附波形，uboot代码） - 程序员大本营_files/7cadee5e239a96fc11a1c180d74101ee.png">
</a>
</div>
<header class="loop-data">
<h3 style="margin-top:0px;border-bottom-style: none;padding-bottom: 0px;margin-bottom: 0px;line-height:30px;">
<a href="https://www.pianshen.com/article/1597917029/" rel="bookmark" title="eMMC SD SDIO TF MMC的区别">eMMC SD <b style="color:black;background-color:#ffff66">SDIO</b> TF MMC的区别</a>
</h3>
</header>
<div class="mh-excerpt">
<p style="line-height:25px;">一直搞不清各种卡区别，整理下学习资料。 MMC(multiMedia card)是一种通信协议，支持两种模式SPI和MMC，定义了诸如卡的形态、尺寸、容量、电气信号、和主机之间的通信协议等。eMMC SD TF MMC都是在MMC基础上演化发展不同的规范，比如物理尺寸，封装，电压，管脚，位宽，时钟信号等不同，但都使用相同的总线规范。 SD卡强调的是安全. MMC强调是多媒体 <b style="color:black;background-color:#ffff66">SDIO</b>强调的是接口，...</p>
</div>
</div>
</div>
</div>
</div>
<div>
<div>
<div style="padding-top:6px;padding-bottom:6px;">
<div class="loop-wrap clearfix">
<div class="loop-thumb">
<a href="https://www.pianshen.com/article/91021834412/"><img style="width:172px;height:120px;" src="./[SDIO] SD card 初始化及常用命令解析（附波形，uboot代码） - 程序员大本营_files/86b7d1e8824cc085362f257c8d23051b.png">
</a>
</div>
<header class="loop-data">
<h3 style="margin-top:0px;border-bottom-style: none;padding-bottom: 0px;margin-bottom: 0px;line-height:30px;">
<a href="https://www.pianshen.com/article/91021834412/" rel="bookmark" title="MMC、SD、TF、SDIO、SDMMC简介">MMC、SD、TF、<b style="color:black;background-color:#ffff66">SDIO</b>、SDMMC简介</a>
</h3>
</header>
<div class="mh-excerpt">
<p style="line-height:25px;">MMC 概念 MMC的全称是”MultiMediaCard”DD所以也通常被叫做”多媒体卡”，是一种小巧大容量的快闪存储卡,特别应用于移动电话和数字影像及其他移动终端中。 外形及接口定义 如上图所示，MMC存贮卡只有7pin，可以支持MMC和SPI两种工作模式，或者换句话说：MMC是一种通信协议，支持两种模式SPI和MMC。MMC模式是标准的默认模式...</p>
</div>
</div>
</div>
</div>
</div>
<div>
<div>
<div style="padding-top:6px;padding-bottom:6px;">
<div class="loop-wrap clearfix">
<div class="loop-thumb">
<a href="https://www.pianshen.com/article/53722037095/"><img style="width:172px;height:120px;" src="./[SDIO] SD card 初始化及常用命令解析（附波形，uboot代码） - 程序员大本营_files/53ae5c46685c21bb6ead0046e31ad696.JPEG">
</a>
</div>
<header class="loop-data">
<h3 style="margin-top:0px;border-bottom-style: none;padding-bottom: 0px;margin-bottom: 0px;line-height:30px;">
<a href="https://www.pianshen.com/article/53722037095/" rel="bookmark" title="基于串口的SD_card系统">基于串口的SD_card系统</a>
</h3>
</header>
<div class="mh-excerpt">
<p style="line-height:25px;">基于串口的SD_card系统 概述 基于串口的SD_card系统 1， 扫描文件； 2， 新建文件； 3， 删除文件； 4， 写入文件； 5， 读取文件。 　　整个文件系统的串口通信方式都是ASC通信方式。 　　文件系统分为简单实用方式和专业使用方式，简单使用方式只需要普通的串口调试助手就可以完成。专业使用方式需要专用的调试上位机。简单模式/专业模式的切换可以通过发送命令完成。 命令详解： 1， ...</p>
</div>
</div>
</div>
</div>
</div>
<div id="lads2" style="width:100%;height:90px;" class="dotloading">
<div id="68481-28"></div>
</div>
<h3><span>猜你喜欢</span></h3>
<div>
<div>
<div style="padding-top:6px;padding-bottom:6px;">
<div class="loop-wrap clearfix">
<div class="loop-thumb">
<a href="https://www.pianshen.com/article/63891234782/"><img style="width:172px;height:120px;" src="./[SDIO] SD card 初始化及常用命令解析（附波形，uboot代码） - 程序员大本营_files/7a04eaebd4f41d57a39522676af7ec9f.png">
</a>
</div>
<header class="loop-data">
<h3 style="margin-top:0px;border-bottom-style: none;padding-bottom: 0px;margin-bottom: 0px;line-height:30px;">
<a href="https://www.pianshen.com/article/63891234782/" rel="bookmark" title="SDIO协议读写SD卡之SD卡简介"><b style="color:black;background-color:#ffff66">SDIO</b>协议读写SD卡之SD卡简介</a>
</h3>
</header>
<div class="mh-excerpt">
<p style="line-height:25px;">SD卡的用途 SD卡是一种主要以Nand Flash作为存储介质，具有体积小、数据传输速度快以及支持热插拔的优点。如今，已被广泛应用于数码相机、便携式移动设备以及手机等多种设备中。 SD卡分类 (一)按照大小进行分类 1、Micro SD卡(本文称为SD卡) 如下图所示： 2、SD卡 如下图所示： 3、对比 Micro SD卡和SD卡最主要的不同便是SD卡的尺寸更大，且侧面(红色标记)具有一个写保...</p>
</div>
</div>
</div>
</div>
</div>
<div>
<div>
<div style="padding-top:6px;padding-bottom:6px;">
<div class="loop-wrap clearfix">
<div class="loop-thumb">
<a href="https://www.pianshen.com/article/9133988282/"><img style="width:172px;height:120px;" src="./[SDIO] SD card 初始化及常用命令解析（附波形，uboot代码） - 程序员大本营_files/0042d05cf2ac843088d1567d4385fca5.png">
</a>
</div>
<header class="loop-data">
<h3 style="margin-top:0px;border-bottom-style: none;padding-bottom: 0px;margin-bottom: 0px;line-height:30px;">
<a href="https://www.pianshen.com/article/9133988282/" rel="bookmark" title="【STM32】使用SDIO进行SD卡读写，包含文件管理FatFs（二）-了解SD总线，命令的相关介绍">【STM32】使用<b style="color:black;background-color:#ffff66">SDIO</b>进行SD卡读写，包含文件管理FatFs（二）-了解SD总线，命令的相关介绍</a>
</h3>
</header>
<div class="mh-excerpt">
<p style="line-height:25px;">一、SD总线，传输的流程 下面来看一下SD bus（总线） 二、SD总线里面的命令和响应的数据格式 三、<b style="color:black;background-color:#ffff66">SDIO</b>进行传输时，使用4根数据线的传输情况 如果使用4条数据线，传输的方式如下图 四、CMD表格，和SD卡通讯所需的命令介绍 CMD分为两种，特定应用命令（ACMD）、常规命令（GEN_CMD）。 如果要使用SD卡制造商特定的命令，则需要在发送特定命令前，先发送CMD55，下面是所有CMD，r...</p>
</div>
</div>
</div>
</div>
</div>
<div>
<div>
<div style="padding-top:6px;padding-bottom:6px;">
<div class="loop-wrap clearfix">
<div class="loop-thumb">
<a href="https://www.pianshen.com/article/14821655060/"><img style="width:172px;height:120px;" src="./[SDIO] SD card 初始化及常用命令解析（附波形，uboot代码） - 程序员大本营_files/0c6aea3771b14bf3751ffe1765bbefdb.png">
</a>
</div>
<header class="loop-data">
<h3 style="margin-top:0px;border-bottom-style: none;padding-bottom: 0px;margin-bottom: 0px;line-height:30px;">
<a href="https://www.pianshen.com/article/14821655060/" rel="bookmark" title="linux下MMC/SD/SDIO驱动系列之四 ---- SDIO的识别与操作">linux下MMC/SD/<b style="color:black;background-color:#ffff66">SDIO</b>驱动系列之四 ---- <b style="color:black;background-color:#ffff66">SDIO</b>的识别与操作</a>
</h3>
</header>
<div class="mh-excerpt">
<p style="line-height:25px;">从上篇文章的最后，我们知道host在扫描卡的过程中，其识别的顺序为<b style="color:black;background-color:#ffff66">SDIO</b>&nbsp; SD MMC，并且从它的注释可以看出，这个顺序是很重要的。那这篇文章，我们就看看<b style="color:black;background-color:#ffff66">SDIO</b>的识别过程，它对应的函数就是mmc_attach_<b style="color:black;background-color:#ffff66">sdio</b>(host)&nbsp;(函数位于文件drivers/mmc/core/<b style="color:black;background-color:#ffff66">sdio</b>.c) &nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;n...</p>
</div>
</div>
</div>
</div>
</div>
<div>
<div>
<div style="padding-top:6px;padding-bottom:6px;">
<div class="loop-wrap clearfix">
<div class="loop-thumb">
<a href="https://www.pianshen.com/article/5986106614/"><img style="width:172px;height:120px;" src="./[SDIO] SD card 初始化及常用命令解析（附波形，uboot代码） - 程序员大本营_files/a86e49a843f2b91fe73a412d44cc2626.JPEG">
</a>
</div>
<header class="loop-data">
<h3 style="margin-top:0px;border-bottom-style: none;padding-bottom: 0px;margin-bottom: 0px;line-height:30px;">
<a href="https://www.pianshen.com/article/5986106614/" rel="bookmark" title="SSO原理 (CAS)">SSO原理 (CAS)</a>
</h3>
</header>
<div class="mh-excerpt">
<p style="line-height:25px;">SSO原理（转至https://steven-wiki.readthedocs.org/en/latest/security/sso/） CAS原理浅谈 本笔记参考自&nbsp;SSO原理浅谈 简单的SSO体系结构: User(多个) Web应用(多个) SSO认证中心(1个) CAS的基本原理 CAS(Central Authentication Service)是Yale大学发起的一个开源项目...</p>
</div>
</div>
</div>
</div>
</div>
<div>
<div>
<div style="padding-top:6px;padding-bottom:6px;">
<div class="loop-wrap clearfix">
<div class="loop-thumb">
<a href="https://www.pianshen.com/article/16351360565/"><img style="width:172px;height:120px;" src="./[SDIO] SD card 初始化及常用命令解析（附波形，uboot代码） - 程序员大本营_files/7b697096e10647fd63626e0cf31ee547.png">
</a>
</div>
<header class="loop-data">
<h3 style="margin-top:0px;border-bottom-style: none;padding-bottom: 0px;margin-bottom: 0px;line-height:30px;">
<a href="https://www.pianshen.com/article/16351360565/" rel="bookmark" title="数值分析计算方法――方程求根">数值分析计算方法――方程求根</a>
</h3>
</header>
<div class="mh-excerpt">
<p style="line-height:25px;">方程求根 二分搜索 步骤： 从所给区间[a,b]着手二分，令a1&lt;=a,b1&lt;=b 取有根区间[a1,b1]的中点x作为近似根 通过根的搜索确定二分后新的有根区间[a1,b1] 检查近似根x是否满足精度要求：若不满足则转步2继续二分；若满足则输出结果x及相应的函数值f(x) 二分法比较常见，可看博客： https://blog.csdn.net/Ace_bb/article/detai...</p>
</div>
</div>
</div>
</div>
</div>
<div id="lads1" style="width:100%;height:90px;" class="dotloading">
<div id="68481-1"></div>
</div>
</div>
<div class="col-md-4">
<h3><span>赞助商广告</span></h3>
<div style="padding:5px 5px 0px 5px;word-wrap: break-word; word-break: normal;">
<ul style="list-style: none;padding-left:0px;">
<li style="padding-top: 6px;padding-bottom: 6px;border-bottom:1px solid #EBEBEB;line-height:20px;"><a href="https://www.pianshen.com/cdn-cgi/l/email-protection#65150c040b160d000b2502081d4b060a085a1610070f0006115882f1d68dcad280dcda80f4ef80f5ed81d8f9" title="在百万程序员中推广你的产品">在百万程序员中推广你的产品</a></li>
</ul>
</div>
<div id="rads1" style="width:100%;height:250px;" class="dotloading">
<div id="68481-2"></div>
</div>
<h3>
<span>相关文章</span>
</h3>
<div style="padding:5px 5px 0px 5px;word-wrap: break-word; word-break: normal;">
<ul style="list-style: none;padding-left:0px;">
<li style="padding-top: 6px;padding-bottom: 6px;border-bottom:1px solid #EBEBEB;line-height:20px;"><a href="https://www.pianshen.com/article/62281927538/" title="SD Card">SD Card</a></li>
<li style="padding-top: 6px;padding-bottom: 6px;border-bottom:1px solid #EBEBEB;line-height:20px;"><a href="https://www.pianshen.com/article/8587539817/" title="(续)linux SD卡初始化---mmc_sd_init_card函数">(续)linux SD卡<b style="color:black;background-color:#A0FFFF">初始化</b>---mmc_sd_init_card函数</a></li>
<li style="padding-top: 6px;padding-bottom: 6px;border-bottom:1px solid #EBEBEB;line-height:20px;"><a href="https://www.pianshen.com/article/4658789333/" title="个人写的SD卡代码（SDIO模式）">个人写的SD卡代码（<b style="color:black;background-color:#ffff66">SDIO</b>模式）</a></li>
<li style="padding-top: 6px;padding-bottom: 6px;border-bottom:1px solid #EBEBEB;line-height:20px;"><a href="https://www.pianshen.com/article/9625904006/" title="【嵌入式】SD Card及协议学习笔记">【嵌入式】SD Card及协议学习笔记</a></li>
<li style="padding-top: 6px;padding-bottom: 6px;border-bottom:1px solid #EBEBEB;line-height:20px;"><a href="https://www.pianshen.com/article/5411765067/" title="MMC、SD、TF、SDIO、SDMMC">MMC、SD、TF、<b style="color:black;background-color:#ffff66">SDIO</b>、SDMMC</a></li>
<li style="padding-top: 6px;padding-bottom: 6px;border-bottom:1px solid #EBEBEB;line-height:20px;"><a href="https://www.pianshen.com/article/19381562025/" title="SDIO挂载多张SD卡"><b style="color:black;background-color:#ffff66">SDIO</b>挂载多张SD卡</a></li>
<li style="padding-top: 6px;padding-bottom: 6px;border-bottom:1px solid #EBEBEB;line-height:20px;"><a href="https://www.pianshen.com/article/452511563/" title="android 中模拟sd card">android 中模拟sd card</a></li>
<li style="padding-top: 6px;padding-bottom: 6px;border-bottom:1px solid #EBEBEB;line-height:20px;"><a href="https://www.pianshen.com/article/65621559595/" title="STM32CubeMX的SDIO模式下对SD卡读写测试（附源码）">STM32CubeMX的<b style="color:black;background-color:#ffff66">SDIO</b>模式下对SD卡读写测试（附源码）</a></li>
<li style="padding-top: 6px;padding-bottom: 6px;border-bottom:1px solid #EBEBEB;line-height:20px;"><a href="https://www.pianshen.com/article/6739454319/" title="SD卡及STM32的SDIO接口相关原理">SD卡及STM32的<b style="color:black;background-color:#ffff66">SDIO</b>接口相关原理</a></li>
<li style="padding-top: 6px;padding-bottom: 6px;border-bottom:1px solid #EBEBEB;line-height:20px;"><a href="https://www.pianshen.com/article/27891648140/" title="使用SD Card Formatter工具格式化还原容量变少的SD卡TF卡">使用SD Card Formatter工具格式化还原容量变少的SD卡TF卡</a></li>
</ul>
</div>
<div id="rightads">
<iframe id="pianshen.com_300x600_responsive_DFP" frameborder="0" scrolling="no" marginheight="0" marginwidth="0" topmargin="0" leftmargin="0" width="300" height="600" src="./[SDIO] SD card 初始化及常用命令解析（附波形，uboot代码） - 程序员大本营_files/saved_resource(2).html"></iframe>

</div>
<h3>
<span>热门文章</span>
</h3>
<div style="padding:5px 5px 0px 5px;word-wrap: break-word; word-break: normal;">
<ul style="list-style: none;padding-left:0px;">
<li style="padding-top: 6px;padding-bottom: 6px;border-bottom:1px solid #EBEBEB;line-height:20px;"><a href="https://www.pianshen.com/article/58691479778/" title="360手机N5体验评测：一款有诚意的手机就应该是这样">360手机N5体验评测：一款有诚意的手机就应该是这样</a></li>
<li style="padding-top: 6px;padding-bottom: 6px;border-bottom:1px solid #EBEBEB;line-height:20px;"><a href="https://www.pianshen.com/article/8228215569/" title="Spring 框架之Spring AOP的认识（一）">Spring 框架之Spring AOP的认识（一）</a></li>
<li style="padding-top: 6px;padding-bottom: 6px;border-bottom:1px solid #EBEBEB;line-height:20px;"><a href="https://www.pianshen.com/article/7198668674/" title="2019年铁威马存储苏州渠道交流会圆满成功">2019年铁威马存储苏州渠道交流会圆满成功</a></li>
<li style="padding-top: 6px;padding-bottom: 6px;border-bottom:1px solid #EBEBEB;line-height:20px;"><a href="https://www.pianshen.com/article/133717322/" title="Ribbon实现客户端负载均衡及策略配置">Ribbon实现客户端负载均衡及策略配置</a></li>
<li style="padding-top: 6px;padding-bottom: 6px;border-bottom:1px solid #EBEBEB;line-height:20px;"><a href="https://www.pianshen.com/article/3388680972/" title="Chrome 将不再允许 https:// 页面加载 HTTP 资源">Chrome 将不再允许 https:// 页面加载 HTTP 资源</a></li>
<li style="padding-top: 6px;padding-bottom: 6px;border-bottom:1px solid #EBEBEB;line-height:20px;"><a href="https://www.pianshen.com/article/13871224454/" title="基于win7系统VS2015，无GPU,OpenCV3.2.0下编译darknet_no_gpu">基于win7系统VS2015，无GPU,OpenCV3.2.0下编译darknet_no_gpu</a></li>
<li style="padding-top: 6px;padding-bottom: 6px;border-bottom:1px solid #EBEBEB;line-height:20px;"><a href="https://www.pianshen.com/article/34701912711/" title="【推荐】双端影视app，看片么小伙子，免费，高清，没vip，离线下载">【推荐】双端影视app，看片么小伙子，免费，高清，没vip，离线下载</a></li>
<li style="padding-top: 6px;padding-bottom: 6px;border-bottom:1px solid #EBEBEB;line-height:20px;"><a href="https://www.pianshen.com/article/76211756351/" title="《VMware Virtual SAN权威指南》一3.7　设计考量：分布式交换机和网络I/O控制">《VMware Virtual SAN权威指南》一3.7　设计考量：分布式交换机和网络I/O控制</a></li>
<li style="padding-top: 6px;padding-bottom: 6px;border-bottom:1px solid #EBEBEB;line-height:20px;"><a href="https://www.pianshen.com/article/15131148596/" title="idea注册">idea注册</a></li>
<li style="padding-top: 6px;padding-bottom: 6px;border-bottom:1px solid #EBEBEB;line-height:20px;"><a href="https://www.pianshen.com/article/49531571613/" title="IBM MQ **库 自建证书 支持 ssl">IBM MQ **库 自建证书 支持 ssl</a></li>
</ul>
</div>
<div id="rads2" style="width:100%;height:250px;" class="dotloading">
<div id="68481-19"></div>
</div>
<h3>
<span>推荐文章</span>
</h3>
<div style="padding:5px 5px 0px 5px;word-wrap: break-word; word-break: normal;">
<ul style="list-style: none;padding-left:0px;">
<li style="padding-top: 6px;padding-bottom: 6px;border-bottom:1px solid #EBEBEB;line-height:20px;"><a href="https://www.pianshen.com/article/530454194/" title="Java volatile使用详细说明-可见性的详细讲解">Java volatile使用详细说明-可见性的详细讲解</a></li>
<li style="padding-top: 6px;padding-bottom: 6px;border-bottom:1px solid #EBEBEB;line-height:20px;"><a href="https://www.pianshen.com/article/55451669282/" title="C语言求1000以内的所有质数">C语言求1000以内的所有质数</a></li>
<li style="padding-top: 6px;padding-bottom: 6px;border-bottom:1px solid #EBEBEB;line-height:20px;"><a href="https://www.pianshen.com/article/9303762877/" title="【领域报告】主动学习年度进展|VALSE2018">【领域报告】主动学习年度进展|VALSE2018</a></li>
<li style="padding-top: 6px;padding-bottom: 6px;border-bottom:1px solid #EBEBEB;line-height:20px;"><a href="https://www.pianshen.com/article/7364366962/" title="antd（ant design）初学(未完成）">antd（ant design）初学(未完成）</a></li>
<li style="padding-top: 6px;padding-bottom: 6px;border-bottom:1px solid #EBEBEB;line-height:20px;"><a href="https://www.pianshen.com/article/7054966964/" title="俄罗斯“木船”机器人系统将于2020年部署部队">俄罗斯“木船”机器人系统将于2020年部署部队</a></li>
<li style="padding-top: 6px;padding-bottom: 6px;border-bottom:1px solid #EBEBEB;line-height:20px;"><a href="https://www.pianshen.com/article/12211976166/" title="教你会画业务序列图">教你会画业务序列图</a></li>
<li style="padding-top: 6px;padding-bottom: 6px;border-bottom:1px solid #EBEBEB;line-height:20px;"><a href="https://www.pianshen.com/article/7155654182/" title="Python数据分析之第三章">Python数据分析之第三章</a></li> 
<li style="padding-top: 6px;padding-bottom: 6px;border-bottom:1px solid #EBEBEB;line-height:20px;"><a href="https://www.pianshen.com/article/6438937636/" title="for循环语句案例：求偶数和">for循环语句案例：求偶数和</a></li>
<li style="padding-top: 6px;padding-bottom: 6px;border-bottom:1px solid #EBEBEB;line-height:20px;"><a href="https://www.pianshen.com/article/6160363540/" title="第七班的火影忍者高清壁纸">第七班的火影忍者高清壁纸</a></li>
<li style="padding-top: 6px;padding-bottom: 6px;border-bottom:1px solid #EBEBEB;line-height:20px;"><a href="https://www.pianshen.com/article/5213968973/" title="消息系统kafka之二 kafka的HA（高可用）">消息系统kafka之二 kafka的HA（高可用）</a></li>
</ul>
</div>
<div id="rads3" style="width:100%;height:600px;" class="dotloading">
<div id="68481-3"></div>
</div>
<h3>
<span>相关标签</span>
</h3>
<div style="padding:5px 5px 0px 5px;word-wrap: break-word; word-break: normal;">
<ul style="list-style: none;padding-left:0px;">
<li style="padding-top: 6px;padding-bottom: 6px;border-bottom:1px solid #EBEBEB;line-height:20px;">
<a href="https://www.pianshen.com/tag/Devices/" title="Devices">Devices</a></li>
<li style="padding-top: 6px;padding-bottom: 6px;border-bottom:1px solid #EBEBEB;line-height:20px;">
<a href="https://www.pianshen.com/tag/SD/" title="SD">SD</a></li>
<li style="padding-top: 6px;padding-bottom: 6px;border-bottom:1px solid #EBEBEB;line-height:20px;">
<a href="https://www.pianshen.com/tag/SD%E5%8D%A1/" title="SD卡">SD卡</a></li>
<li style="padding-top: 6px;padding-bottom: 6px;border-bottom:1px solid #EBEBEB;line-height:20px;">
<a href="https://www.pianshen.com/tag/SDIO/" title="SDIO"><b style="color:black;background-color:#ffff66">SDIO</b></a></li>
<li style="padding-top: 6px;padding-bottom: 6px;border-bottom:1px solid #EBEBEB;line-height:20px;">
<a href="https://www.pianshen.com/tag/STM32/" title="STM32">STM32</a></li>
<li style="padding-top: 6px;padding-bottom: 6px;border-bottom:1px solid #EBEBEB;line-height:20px;">
<a href="https://www.pianshen.com/tag/F429/" title="F429">F429</a></li>
<li style="padding-top: 6px;padding-bottom: 6px;border-bottom:1px solid #EBEBEB;line-height:20px;">
<a href="https://www.pianshen.com/tag/C/" title="C">C</a></li>
<li style="padding-top: 6px;padding-bottom: 6px;border-bottom:1px solid #EBEBEB;line-height:20px;">
<a href="https://www.pianshen.com/tag/%E5%B5%8C%E5%85%A5%E5%BC%8F/" title="嵌入式">嵌入式</a></li>
<li style="padding-top: 6px;padding-bottom: 6px;border-bottom:1px solid #EBEBEB;line-height:20px;">
<a href="https://www.pianshen.com/tag/%E5%99%A8%E4%BB%B6%E5%BC%80%E5%8F%91/" title="器件开发">器件开发</a></li>
<li style="padding-top: 6px;padding-bottom: 6px;border-bottom:1px solid #EBEBEB;line-height:20px;">
<a href="https://www.pianshen.com/tag/sdio/" title="sdio"><b style="color:black;background-color:#ffff66">sdio</b></a></li>
</ul>
</div>
<div id="mbads-sider">
<div id="protag-sidebar"></div>

</div>
</div>
</div>
</div>
<div class="footer-sec">
<div class="container">
<div class="row">
<div class="col-md-12 foo-inner">
Copyright &#169; 2018-2021 - All Rights Reserved - <a href="https://www.pianshen.com/" style="color:white;">www.pianshen.com</a>
<span style="color:red;">网站内容人工审核和清理中！</span>
</div>
</div>
</div>
</div>








</div>



</body></html>